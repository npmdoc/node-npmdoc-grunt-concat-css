<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/urturn/grunt-concat-css">grunt-concat-css (v0.3.1)</a>
</h1>
<h4>Concat CSS with @import statements at top and relative url preserved.</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.grunt-concat-css">module grunt-concat-css</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.grunt-concat-css.Gruntfile">
            function <span class="apidocSignatureSpan">grunt-concat-css.</span>Gruntfile
            <span class="apidocSignatureSpan">(grunt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.grunt-concat-css.concat_css">
            function <span class="apidocSignatureSpan">grunt-concat-css.</span>concat_css
            <span class="apidocSignatureSpan">(grunt)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.grunt-concat-css.Gruntfile">module grunt-concat-css.Gruntfile</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.grunt-concat-css.Gruntfile.Gruntfile">
            function <span class="apidocSignatureSpan">grunt-concat-css.</span>Gruntfile
            <span class="apidocSignatureSpan">(grunt)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.grunt-concat-css.concat_css">module grunt-concat-css.concat_css</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.grunt-concat-css.concat_css.concat_css">
            function <span class="apidocSignatureSpan">grunt-concat-css.</span>concat_css
            <span class="apidocSignatureSpan">(grunt)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.grunt-concat-css" id="apidoc.module.grunt-concat-css">module grunt-concat-css</a></h1>


    <h2>
        <a href="#apidoc.element.grunt-concat-css.Gruntfile" id="apidoc.element.grunt-concat-css.Gruntfile">
        function <span class="apidocSignatureSpan">grunt-concat-css.</span>Gruntfile
        <span class="apidocSignatureSpan">(grunt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Gruntfile = function (grunt) {

  // Project configuration.
  grunt.initConfig({
    jshint: {
      all: [
        'Gruntfile.js',
        'tasks/*.js',
        '&lt;%= nodeunit.tests %&gt;'
      ],
      options: {
        jshintrc: '.jshintrc'
      }
    },

    // Before generating any new files, remove any previously-created files.
    clean: {
      tests: ['tmp']
    },

    // Configuration to be run (and then tested).
    concat_css: {
      default_options: {
        options: {
        },
        files: {
          'tmp/default_options.css': ['test/fixtures/test.css', 'test/fixtures/import.css', 'test/fixtures/component_a/css/style
.css']
        }
      },
      baseDir: {
        options: {
          baseDir: 'test/fixtures'
        },
        files: {
          'tmp/basedir_options.css': ['test/fixtures/test.css', 'test/fixtures/import.css']
        }
      },
      rebase_urls: {
        options: {
          baseDir: 'test/fixtures',
          assetBaseUrl: 'static/assets/' // trailing / can be omitted
        },
        files: {
          'tmp/rebase_urls.css': ['test/fixtures/test.css', 'test/fixtures/import.css', 'test/fixtures/component_a/css/style.css
']
        }
      },
      no_basedir_options: {
        options: {
          assetBaseUrl: '.' // trailing / can be omitted
        },
        files: {
          'tmp/no_basedir_options.css': ['test/fixtures/test.css', 'test/fixtures/import.css', 'test/fixtures/component_a/css/style
.css']
        }
      }
    },

    // Unit tests.
    nodeunit: {
      tests: ['test/*_test.js']
    }

  });

  // Actually load this plugin's task(s).
  grunt.loadTasks('tasks');

  // These plugins provide necessary tasks.
  grunt.loadNpmTasks('grunt-contrib-jshint');
  grunt.loadNpmTasks('grunt-contrib-clean');
  grunt.loadNpmTasks('grunt-contrib-nodeunit');

  // Whenever the "test" task is run, first clean the "tmp" dir, then run this
  // plugin's task(s), then test the result.
  grunt.registerTask('test', ['clean', 'concat_css', 'nodeunit']);

  // By default, lint and run all tests.
  grunt.registerTask('default', ['jshint', 'test']);

}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.grunt-concat-css.concat_css" id="apidoc.element.grunt-concat-css.concat_css">
        function <span class="apidocSignatureSpan">grunt-concat-css.</span>concat_css
        <span class="apidocSignatureSpan">(grunt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">concat_css = function (grunt) {

  // Please see the Grunt documentation for more information regarding task
  // creation: http://gruntjs.com/creating-tasks

  grunt.registerMultiTask('concat_css', 'Your task description goes here.', function() {
    // Merge task-specific and/or target-specific options with these defaults.
    var options = this.options({
      assetBaseUrl: false,
      debugMode: false
    });

    // Iterate over all specified file groups.
    this.files.forEach(function(f) {
      var importStatements = [];
      var sources = [];

      var extractImportStatements = function (data){
        var rex = /@import\s.+\;/gim;
        var replaceRex = /[\s]*@import\s.+\;/gim;
        var matches = data.css.match(rex);
        if(matches &amp;&amp; matches.length &gt; 0){
          grunt.log.write("Found " + matches.join(", "));
          data.imports = matches;
          data.css = data.css.replace(replaceRex, '');
        }
      };

      var rebaseUrls = function (data) {
        function dirname(csspath){
          var splits = csspath.split('/');
          splits.pop();
          return splits.join('/');
        }

        // Rebase any url('someUrl') variation
        function dataTransformUrlFunc(basedir) {
          var bd = basedir;
          return function(_, b) {
            return "url('"+normalize([bd, b].join('/'))+"')";
          };
        }

        // Rebase @import 'someUrl' exception
        function dataTransformImportAlternateFunc(basedir) {
          var bd = basedir;
          return function(_, b) {
            return "@import url('"+normalize([bd, b].join('/'))+"')";
          };
        }

<span class="apidocCodeCommentSpan">        /**
         * remove upFolder(..) part of an URL
         */
</span>        function normalize(url) {
          var computedParts = [];
          var parts = url.split('/');
          for (var i in parts){
            if (parts[i] === '..') {
              computedParts.pop();
            } else {
              computedParts.push(parts[i]);
            }
          }
          return computedParts.join('/');
        }

        function computeBaseUrl() {
          var re = new RegExp('(?:^'+ options.baseDir +'\/?)?(.*)\/[^\/]+$');
          var re_no_base_dir = /(.*)\/[^\/]+$/;
          var relativePath = options.baseDir ? data.path.replace(re, '$1') : data.path.replace(re_no_base_dir, '$1');
          return options.assetBaseUrl.replace(/\/$/, '') + (relativePath ? '/' + relativePath : '');
        }

        var baseUrl = computeBaseUrl();

        data.css = data.css.replace(/url\(['\"]?([^'\"\:]+)['\"]?\)/gm, dataTransformUrlFunc(baseUrl));
        data.css = data.css.replace(/@import\s+['\"]([^'\"\:]+)['\"]/gm, dataTransformImportAlternateFunc(baseUrl));
      };

      var imports = "";
      var cssFragments = [];

      options.debugMode &amp;&amp; console.log(f.src, f.dest);
      // Concat specified files.
      var results = f.src.map(function(filepath) {
        // Read file source.
        var data = {
          path: filepath,
          css: grunt.file.read(filepath)
        };
        options.debugMode &amp;&amp; console.log(data);
        if ([false, undefined].indexOf(options.assetBaseUrl) === -1) {
          rebaseUrls(data);
        }
        extractImportStatements(data);
        if (data.imports) {
          imports += data.imports.join("\n") + "\n";
        }
        cssFragments.push(data.css.replace(/(^\s+|\s+$)/g,''));
        return data;
      });

      // Write the destination file.
      grunt.file.write(f.dest, imports + cssFragments.join('\n') + '\n');

      // Print a success message.
      grunt.log.writeln('File "' + f.dest + '" created.');
    });
  });

}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.grunt-concat-css.Gruntfile" id="apidoc.module.grunt-concat-css.Gruntfile">module grunt-concat-css.Gruntfile</a></h1>


    <h2>
        <a href="#apidoc.element.grunt-concat-css.Gruntfile.Gruntfile" id="apidoc.element.grunt-concat-css.Gruntfile.Gruntfile">
        function <span class="apidocSignatureSpan">grunt-concat-css.</span>Gruntfile
        <span class="apidocSignatureSpan">(grunt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Gruntfile = function (grunt) {

  // Project configuration.
  grunt.initConfig({
    jshint: {
      all: [
        'Gruntfile.js',
        'tasks/*.js',
        '&lt;%= nodeunit.tests %&gt;'
      ],
      options: {
        jshintrc: '.jshintrc'
      }
    },

    // Before generating any new files, remove any previously-created files.
    clean: {
      tests: ['tmp']
    },

    // Configuration to be run (and then tested).
    concat_css: {
      default_options: {
        options: {
        },
        files: {
          'tmp/default_options.css': ['test/fixtures/test.css', 'test/fixtures/import.css', 'test/fixtures/component_a/css/style
.css']
        }
      },
      baseDir: {
        options: {
          baseDir: 'test/fixtures'
        },
        files: {
          'tmp/basedir_options.css': ['test/fixtures/test.css', 'test/fixtures/import.css']
        }
      },
      rebase_urls: {
        options: {
          baseDir: 'test/fixtures',
          assetBaseUrl: 'static/assets/' // trailing / can be omitted
        },
        files: {
          'tmp/rebase_urls.css': ['test/fixtures/test.css', 'test/fixtures/import.css', 'test/fixtures/component_a/css/style.css
']
        }
      },
      no_basedir_options: {
        options: {
          assetBaseUrl: '.' // trailing / can be omitted
        },
        files: {
          'tmp/no_basedir_options.css': ['test/fixtures/test.css', 'test/fixtures/import.css', 'test/fixtures/component_a/css/style
.css']
        }
      }
    },

    // Unit tests.
    nodeunit: {
      tests: ['test/*_test.js']
    }

  });

  // Actually load this plugin's task(s).
  grunt.loadTasks('tasks');

  // These plugins provide necessary tasks.
  grunt.loadNpmTasks('grunt-contrib-jshint');
  grunt.loadNpmTasks('grunt-contrib-clean');
  grunt.loadNpmTasks('grunt-contrib-nodeunit');

  // Whenever the "test" task is run, first clean the "tmp" dir, then run this
  // plugin's task(s), then test the result.
  grunt.registerTask('test', ['clean', 'concat_css', 'nodeunit']);

  // By default, lint and run all tests.
  grunt.registerTask('default', ['jshint', 'test']);

}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.grunt-concat-css.concat_css" id="apidoc.module.grunt-concat-css.concat_css">module grunt-concat-css.concat_css</a></h1>


    <h2>
        <a href="#apidoc.element.grunt-concat-css.concat_css.concat_css" id="apidoc.element.grunt-concat-css.concat_css.concat_css">
        function <span class="apidocSignatureSpan">grunt-concat-css.</span>concat_css
        <span class="apidocSignatureSpan">(grunt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">concat_css = function (grunt) {

  // Please see the Grunt documentation for more information regarding task
  // creation: http://gruntjs.com/creating-tasks

  grunt.registerMultiTask('concat_css', 'Your task description goes here.', function() {
    // Merge task-specific and/or target-specific options with these defaults.
    var options = this.options({
      assetBaseUrl: false,
      debugMode: false
    });

    // Iterate over all specified file groups.
    this.files.forEach(function(f) {
      var importStatements = [];
      var sources = [];

      var extractImportStatements = function (data){
        var rex = /@import\s.+\;/gim;
        var replaceRex = /[\s]*@import\s.+\;/gim;
        var matches = data.css.match(rex);
        if(matches &amp;&amp; matches.length &gt; 0){
          grunt.log.write("Found " + matches.join(", "));
          data.imports = matches;
          data.css = data.css.replace(replaceRex, '');
        }
      };

      var rebaseUrls = function (data) {
        function dirname(csspath){
          var splits = csspath.split('/');
          splits.pop();
          return splits.join('/');
        }

        // Rebase any url('someUrl') variation
        function dataTransformUrlFunc(basedir) {
          var bd = basedir;
          return function(_, b) {
            return "url('"+normalize([bd, b].join('/'))+"')";
          };
        }

        // Rebase @import 'someUrl' exception
        function dataTransformImportAlternateFunc(basedir) {
          var bd = basedir;
          return function(_, b) {
            return "@import url('"+normalize([bd, b].join('/'))+"')";
          };
        }

<span class="apidocCodeCommentSpan">        /**
         * remove upFolder(..) part of an URL
         */
</span>        function normalize(url) {
          var computedParts = [];
          var parts = url.split('/');
          for (var i in parts){
            if (parts[i] === '..') {
              computedParts.pop();
            } else {
              computedParts.push(parts[i]);
            }
          }
          return computedParts.join('/');
        }

        function computeBaseUrl() {
          var re = new RegExp('(?:^'+ options.baseDir +'\/?)?(.*)\/[^\/]+$');
          var re_no_base_dir = /(.*)\/[^\/]+$/;
          var relativePath = options.baseDir ? data.path.replace(re, '$1') : data.path.replace(re_no_base_dir, '$1');
          return options.assetBaseUrl.replace(/\/$/, '') + (relativePath ? '/' + relativePath : '');
        }

        var baseUrl = computeBaseUrl();

        data.css = data.css.replace(/url\(['\"]?([^'\"\:]+)['\"]?\)/gm, dataTransformUrlFunc(baseUrl));
        data.css = data.css.replace(/@import\s+['\"]([^'\"\:]+)['\"]/gm, dataTransformImportAlternateFunc(baseUrl));
      };

      var imports = "";
      var cssFragments = [];

      options.debugMode &amp;&amp; console.log(f.src, f.dest);
      // Concat specified files.
      var results = f.src.map(function(filepath) {
        // Read file source.
        var data = {
          path: filepath,
          css: grunt.file.read(filepath)
        };
        options.debugMode &amp;&amp; console.log(data);
        if ([false, undefined].indexOf(options.assetBaseUrl) === -1) {
          rebaseUrls(data);
        }
        extractImportStatements(data);
        if (data.imports) {
          imports += data.imports.join("\n") + "\n";
        }
        cssFragments.push(data.css.replace(/(^\s+|\s+$)/g,''));
        return data;
      });

      // Write the destination file.
      grunt.file.write(f.dest, imports + cssFragments.join('\n') + '\n');

      // Print a success message.
      grunt.log.writeln('File "' + f.dest + '" created.');
    });
  });

}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>